(window.webpackJsonp=window.webpackJsonp||[]).push([[61],{267:function(t,e,a){"use strict";a.r(e);var s=a(0),r=Object(s.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p"),a("div",{staticClass:"table-of-contents"},[a("ul",[a("li",[a("a",{attrs:{href:"#react"}},[t._v("React")]),a("ul",[a("li",[a("a",{attrs:{href:"#组件"}},[t._v("组件")])]),a("li",[a("a",{attrs:{href:"#hook"}},[t._v("Hook")])])])]),a("li",[a("a",{attrs:{href:"#redux"}},[t._v("Redux")]),a("ul",[a("li",[a("a",{attrs:{href:"#redux杂项"}},[t._v("redux杂项")])]),a("li",[a("a",{attrs:{href:"#基本概念"}},[t._v("基本概念")])])])]),a("li",[a("a",{attrs:{href:"#redux-toolkit"}},[t._v("redux-toolkit")])]),a("li",[a("a",{attrs:{href:"#react-router"}},[t._v("react-router")])]),a("li",[a("a",{attrs:{href:"#create-react-app"}},[t._v("create-react-app")])]),a("li",[a("a",{attrs:{href:"#学习使用ant-design-pro"}},[t._v("学习使用ant design pro")])])])]),t._v("\n[toc]"),a("p"),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"react"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#react"}},[t._v("#")]),t._v(" React")]),t._v(" "),a("ul",[a("li",[t._v("React.Component React.PureComponent 区别")])]),t._v(" "),a("p",[t._v("PureComponent 通过 props 和 state 的 浅对比实现 shouldComponentUpdate；前者需要自己实现")]),t._v(" "),a("hr"),t._v(" "),a("ul",[a("li",[a("p",[t._v("当input设置了value，但是没有设置onChange时会报错，可设置defaultValue或把onChange事件加上")])]),t._v(" "),a("li",[a("p",[t._v("ReactDOM.render(< div>当要添加多个标签时要用div包含在内</ div>,容器元素对象)")])]),t._v(" "),a("li",[a("p",[t._v("jsx中写js的代码用{}括起来；之外可以正常用；")])]),t._v(" "),a("li",[a("p",[t._v("react推荐使用内联样式")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("引入图片")])]),t._v(" "),a("ol",[a("li",[t._v("css 设置背景图")]),t._v(" "),a("li",[t._v("src=\"require('xx/xx/x.jpg')\"")]),t._v(" "),a("li",[t._v("import logo from './public/logo.png';")])])])]),t._v(" "),a("hr"),t._v(" "),a("ul",[a("li",[a("p",[t._v("React.createElement(标签名|函数组件|class组件, { ...props }, children)")])]),t._v(" "),a("li",[a("p",[t._v("React.cloneElement(createElement创建的元素)")])]),t._v(" "),a("li",[a("p",[t._v("react 严格模式 StrictMode, 用了antd 后，会报错，删除严格模式即可")])])]),t._v(" "),a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("React.StrictMode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("App")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("React.StrictMode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),a("hr"),t._v(" "),a("ul",[a("li",[t._v("HOC: 参见 react-admin ；（与公共组件区别，主要是公共组件应该是多地方引用相同的组件，而不需要修改公共组件内容）")])]),t._v(" "),a("hr"),t._v(" "),a("ul",[a("li",[t._v("在 create-react-app 中使用 装饰器：")])]),t._v(" "),a("ol",[a("li",[t._v("npm run eject")]),t._v(" "),a("li",[t._v("配置babel")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('"plugins": [\n    [\n        "@babel/plugin-proposal-decorators", 这里的插件，create-react-app 已经安装\n        {\n            "legacy": true\n        }\n    ]\n]\n')])])]),a("ol",{attrs:{start:"3"}},[a("li",[t._v('勾选 vscode 中的 typescript 配置 "javascript.implicitProjectConfig.experimentalDecorators": true')])]),t._v(" "),a("hr"),t._v(" "),a("h3",{attrs:{id:"组件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#组件"}},[t._v("#")]),t._v(" 组件")]),t._v(" "),a("p",[t._v("组件中 this 两种方式调用当前组件")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("// 方式一：\nconstructor(props) {\n  this.handleClick = this.handleClick.bind(this);\n}\n\n// 方式二：利用箭头函数\nonChange = () => {\n    console.log(this);\n}\n")])])]),a("ol",[a("li",[t._v("function component")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("function Welcome(props) {  \n  return < h1>Hello, { props.name}< /h1>;  \n}\n")])])]),a("ol",{attrs:{start:"2"}},[a("li",[t._v("es6语法")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("class Welcome extends React.Component {  \n  render() {  \n    return < h1>Hello, {this.props.name}< /h1>;  \n  }}\n")])])]),a("ul",[a("li",[a("p",[t._v("组件类名必须大写，且只能包含一个顶层标签")])]),t._v(" "),a("li",[a("p",[t._v("通过this.props.属性名，来获取参数")])]),t._v(" "),a("li",[a("p",[t._v("属性名class要用className，for要用htmlFor")])]),t._v(" "),a("li",[a("p",[t._v("复合组件要用div标签包含起来")])]),t._v(" "),a("li",[a("p",[t._v("this.props的属性与组件的属性一一对应，但是this.props.children例外，它表示组件的所有子节点，它会返回undefind，object，array类型的值，所以react提供了React.Children来处理它可以用React.Children.map()，来遍历就不用担心返回的是什么类型的值。")])])]),t._v(" "),a("hr"),t._v(" "),a("p",[a("strong",[t._v("ref和findDOMNode")])]),t._v(" "),a("ul",[a("li",[t._v("在节点上设置ref属性，然后用this.refs.属性名即可获取到真实的节点")]),t._v(" "),a("li",[t._v("ref添加到Compoennt上获取的是Compoennt实例，添加到原生HTML上获取的是DOM")]),t._v(" "),a("li",[t._v("ReactDOM.findDOMNode，当参数是DOM，返回值就是该DOM（这个没啥卵用）；当参数是Component获取的是该Component render方法中的DOM，返回的都是DOM")])]),t._v(" "),a("hr"),t._v(" "),a("p",[a("strong",[t._v("对于表单value")]),t._v("\n不能用this.props来获取，只能用event.target.value获取")]),t._v(" "),a("hr"),t._v(" "),a("p",[a("strong",[t._v("组件的生命周期")]),t._v("\nmounting：已插入真实的DOM"),a("br"),t._v("\nupdating：正在被重新渲染"),a("br"),t._v("\nunmounting：已移除真实的DOM"),a("br"),t._v("\nwill:函数在进入状态之前，did：函数在进入状态之后"),a("br"),t._v("\ncomponentWillMount()"),a("br"),t._v("\ncomponentDidMount()"),a("br"),t._v("\ncomponentWillUpdate(object nextProps, object nextState)"),a("br"),t._v("\ncomponentDidUpdate(object prevProps, object prevState)"),a("br"),t._v("\ncomponentWillUnmount()"),a("br"),t._v("\nMounted：组件被render解析，生成对应DOM节点并被插入浏览器DOM结构的过程。"),a("br"),t._v("\nUpdate：mounted的组件被重新render的过程。"),a("br"),t._v("\nUnmounted：组件对应的DOM节点被从DOM结构中移除的过程。"),a("br"),t._v("\n每一个状态都封装了相应的hook（钩子）函数")]),t._v(" "),a("hr"),t._v(" "),a("p",[a("strong",[t._v("状态state")]),a("br"),t._v("\n初始状态用getInitialState对象赋值"),a("br"),t._v("\ngetInitialState:function(return {状态名:值})"),a("br"),t._v("\n该对象可以用this.state获取"),a("br"),t._v("\n用this.setState修改该对象，每次修改都会重新调用this.render方法重新渲染"),a("br"),t._v("\n在渲染是修改了state或props会陷入死循环。")]),t._v(" "),a("hr"),t._v(" "),a("p",[a("strong",[t._v("props和state")]),a("br"),t._v("\nprops是不可以改变的")]),t._v(" "),a("p",[t._v("赋初值一般用于 props 未赋值，但又不能为 null 的情况")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("组件名.defaultProps = {\n  key: value\n};\n")])])]),a("hr"),t._v(" "),a("p",[t._v("组件的属性类型判断，验证props 使用 prop-types 库")]),t._v(" "),a("h3",{attrs:{id:"hook"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hook"}},[t._v("#")]),t._v(" Hook")]),t._v(" "),a("p",[t._v("实践代码： react-admin/src/pages/practice/hooks")]),t._v(" "),a("ul",[a("li",[t._v("使函数组件拥有状态 useState")]),t._v(" "),a("li",[t._v("只能放到函数组件中，如（useParams）")]),t._v(" "),a("li",[t._v("复杂状态用 "),a("code",[t._v("useReducer()")])])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 必须放在函数内顶部")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" val"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setVal "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'initValue'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 返回数组,第一个值是设置的值，第二个值是更新这个值的函数")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 这里用数组 就是为了可以自己定义 state 和修改state函数的名字，如果用对象解构 名字就需要固定")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setVal")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("old")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" old"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 采用回调方式更新，更好，修改后 react 会自动渲染对应UI，不会将新的 state和旧的state 合并")]),t._v("\n")])])]),a("p",[t._v("原理：全局维护了一个 workInProgressHook 变量，多个数据间是采用链式的通过 next 进行的串联结构，所以不能在判断，循环，嵌套中使用，否则破坏链式结构")]),t._v(" "),a("p",[t._v("拥有了生命周期的概念(对应关系):")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("constructor              -> useState\ngetDerivedStateFromProps -> useState 中的 update 函数\nshouldComponentUpdate    -> useMemo\nrender                   -> 函数本身\ncomponentDidMount        -> useEffect\ncomponentDidUpdate       -> useEffect\ncomponentWillUnmount     -> useEffect 里返回的函数\n")])])]),a("h2",{attrs:{id:"redux"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#redux"}},[t._v("#")]),t._v(" Redux")]),t._v(" "),a("h3",{attrs:{id:"redux杂项"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#redux杂项"}},[t._v("#")]),t._v(" redux杂项")]),t._v(" "),a("p",[t._v("Action 发出以后，Reducer 立即算出 State，这叫做同步；Action 发出以后，过一段时间再执行 Reducer，这就是异步。")]),t._v(" "),a("p",[t._v("参考示例： https://www.redux.org.cn/docs/basics/ExampleTodoList.html")]),t._v(" "),a("hr"),t._v(" "),a("h3",{attrs:{id:"基本概念"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#基本概念"}},[t._v("#")]),t._v(" 基本概念")]),t._v(" "),a("p",[t._v("store"),a("br"),t._v("\n保存数据的地方，可看成一个容器，整个应用只能有一个store"),a("br"),t._v("\nredux提供了createStore函数接收一个函数参数，返回新的store对象")]),t._v(" "),a("hr"),t._v(" "),a("p",[t._v("state"),a("br"),t._v("\nstore对象包含了所有数据，如果想得到某个时点的数据就要对store生成快照，这种时点的数据结合就叫state"),a("br"),t._v("\n当前时刻的state可以用store.getState()获得一个state对应一个view")]),t._v(" "),a("hr"),t._v(" "),a("p",[t._v("action"),a("br"),t._v("\nstate的变化会导致view的变化，但是用户只能看到view，所以state的变化是view导致的，  action就是view发出的通知，告知state要变了"),a("br"),t._v("\naction是一个对象，type属性是必须的，其它的随意"),a("br"),t._v("\nstore.dispatch()是view发出action的唯一方法，可接受一个action对象作为参数。")]),t._v(" "),a("hr"),t._v(" "),a("p",[t._v("reducer"),a("br"),t._v("\nstore接收到action后，必须给出一个新的state，view才会变化，这就是reducer过程。"),a("br"),t._v("\nreducer函数接收state和action参数，返回一个新的state。 简单的通过 switch 判断不同的 action  返回不同的state 通过 connect 连接多个reducer\nstore.dispatch()方法会触发reducer的自执行")]),t._v(" "),a("hr"),t._v(" "),a("p",[t._v("subscribe"),a("br"),t._v("\n可以用subscribe函数监听store，一旦state发生变化就自动执行这个函数，该方法返回一个函数，调用这个函数就可以接触监听。")]),t._v(" "),a("h2",{attrs:{id:"redux-toolkit"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#redux-toolkit"}},[t._v("#")]),t._v(" redux-toolkit")]),t._v(" "),a("p",[t._v("教程 https://penueling.com/%E6%8A%80%E8%A1%93%E7%AD%86%E8%A8%98/react-react-redux-redix-toolkit-%E6%96%B0%E6%89%8B%E6%95%99%E5%AD%B8/")]),t._v(" "),a("ul",[a("li",[t._v("createSlice()\n根据传递的参数自动生成相应的actionCreator和reducer函数  https://blog.csdn.net/ilovethesunshine/article/details/109627560")])]),t._v(" "),a("h2",{attrs:{id:"react-router"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#react-router"}},[t._v("#")]),t._v(" react-router")]),t._v(" "),a("p",[t._v("react-router 和react-router-dom 只要引用一个就行了，不同之处就是后者比前者多出了 < Link> < BrowserRouter> 这样的 DOM 类组件。"),a("br"),t._v("\n因此我们只需引用 react-router-dom 这个包就行了。当然，如果搭配 redux ，你还需要使用 react-router-redux。")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("exact")]),t._v(" 精准定位路由 匹配 '/' 跟路由时作用明显")])]),t._v(" "),a("h2",{attrs:{id:"create-react-app"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#create-react-app"}},[t._v("#")]),t._v(" create-react-app")]),t._v(" "),a("ul",[a("li",[t._v("修改端口：\n创建 "),a("code",[t._v(".env")]),t._v(" 文件")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("PORT=3006\n")])])]),a("p",[t._v("使用eject 暴露出配置后")]),t._v(" "),a("p",[t._v("可以在 config/webpack.config.js 中配置 alias "),a("code",[t._v("'@': path.resolve(__dirname, '../src'),")])]),t._v(" "),a("h2",{attrs:{id:"学习使用ant-design-pro"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#学习使用ant-design-pro"}},[t._v("#")]),t._v(" 学习使用ant design pro")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://pro.ant.design/index-cn",target:"_blank",rel:"noopener noreferrer"}},[t._v("文档地址 https://pro.ant.design/index-cn"),a("OutboundLink")],1)]),t._v(" "),a("ul",[a("li",[t._v("修改端口号h和关闭自动打开浏览器：\n"),a("ul",[a("li",[t._v('修改package.json的"start": "cross-env port=5656 browser=none APP_TYPE=site umi dev"中，注意不要放到最后')]),t._v(" "),a("li",[t._v("修改node_modules/af-webpack/lib/dev.js中的如下代码")])])])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DEFAULT_PORT")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("parseInt")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("process"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("PORT")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5656")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 修改默认值")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" _openBrowser"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("default"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("urls"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("localUrlForBrowser"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 注释该行")]),t._v("\n")])])])])}),[],!1,null,null,null);e.default=r.exports}}]);